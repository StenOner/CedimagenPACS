<form (ngSubmit)="onSubmit()">
    <div class="d-flex w-100 pl-3 flex-column align-items-center">
        <div class="d-flex w-75 form-group flex-column">
            <label for="_id">ID</label>
            <input type="text" class="form-control" name="_id" [value]="test._id" disabled>
        </div>
        <div class="d-flex w-75 form-group flex-column">
            <label for="clientID">Correo del usuario</label>
            <input type="text" class="form-control" name="clientID" [value]="$any(test.clientID).email" disabled>
        </div>     
        <div class="d-flex w-75 form-group flex-column">
            <label for="testTypeID">Tipo de Examen</label>
            <select class="form-control" name="testTypeID" [(ngModel)]="test.testTypeID" required>
                <option [value]="" selected>Seleccione un tipo de cuenta</option>
                <option *ngFor="let testType of testTypes" [value]="testType._id">{{testType.type|titlecase}}</option>
            </select>
        </div>
        <h4>Paciente</h4>
        <div class="d-flex w-75 flex-column">
            <div class="d-flex w-100">
                <div class="d-flex w-75 flex-column form-group">
                    <label for="fullName">Nombre del Paciente</label>
                    <input type="text" class="form-control" name="fullName" [(ngModel)]="test.patient.fullName" placeholder="Nombre completo" required>
                </div>
                <div class="d-flex w-25 flex-column form-group">
                    <label for="age">Edad</label>
                    <input type="number" class="form-control" name="age" [(ngModel)]="test.patient.age" required>
                </div>
            </div>
            <div class="d-flex w-100">
                <div class="d-flex w-100 flex-column form-group">
                    <label for="dni">DNI</label>
                    <input type="text" class="form-control" name="dni" [(ngModel)]="test.patient.dni" placeholder="DNI" required>
                </div>
            </div>
            <div class="d-flex w-100">                
                <div class="d-flex w-50 flex-column form-group">
                    <label for="testDate">Fecha del examen</label>
                    <input type="date" class="form-control" name="testDate" [value]="test.patient.testDate|date:'yyyy-MM-dd'" 
                    (change)="handleDateInput($event.target.name, $event.target.value)" required>
                    <small>{{test.patient.testDate}}</small>
                </div>
                <div class="d-flex w-50 flex-column form-group">
                    <label for="informDate">Fecha del informe</label>
                    <input type="date" class="form-control" name="informDate" [value]="test.patient.informDate|date:'yyyy-MM-dd'" 
                    (change)="handleDateInput($event.target.name, $event.target.value)" required>
                    <small>{{test.patient.informDate}}</small>
                </div>
            </div>
            <div class="d-flex w-100">                
                <div class="d-flex w-100 flex-column form-group">
                    <label for="remarks">Observaciones</label>
                    <textarea class="form-control" name="remarks" [(ngModel)]="test.patient.remarks" placeholder="Observaciones" required></textarea>
                </div>
            </div>
        </div>
        <div class="d-flex w-75 form-group flex-column">
            <div class="d-flex w-100">                
                <div class="d-flex w-50 flex-column form-group">
                    <label for="testDate">Revisado por</label>
                    <input type="text" class="form-control" name="testDate" [value]="test.reviewevBy" disabled>
                </div>
                <div class="d-flex w-50 flex-column form-group">
                    <label for="reviewDate">Fecha de la revision</label>
                    <input type="text" class="form-control" name="reviewDate" [value]="test.reviewDate|date" disabled>
                </div>
            </div>
        </div>
        <div class="flex w-75 form-group">
            <input type="file" class="btn btn-outline-primary" name="testFile" (change)="handleFileInput($event.target.files)" required>
            <small *ngIf="test.testFile">Archivo actual: {{test.testFile}}</small>
        </div>
        <div class="d-flex w-75 form-group flex-column">
            <label for="createdAt">Fecha de Creacion</label>
            <input type="text" class="form-control" name="_id" [value]="test.createdAt|date" disabled>
        </div>
        <div class="d-flex w-75 form-group flex-column">
            <label for="state">Activo</label>
            <select class="form-control" name="state" [(ngModel)]="test.state" required>
                <option value="" selected>Seleccione un estado</option>
                <option *ngFor="let state of testStates" [value]="state">{{state|translateUserState}}</option>
            </select>
        </div>
        <div class="flex w-75">
            <input type="submit" class="btn btn-outline-secondary float-right" value="Guardar">
        </div>
    </div>
</form>